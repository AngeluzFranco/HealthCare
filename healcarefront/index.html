<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HealthCare - Dashboard</title>
  

  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
 
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style id="app-style">
    .progress-ring {
      transform: rotate(-90deg);
    }
    
    .progress-ring__circle {
      transition: stroke-dashoffset 0.35s;
      transform-origin: 50% 50%;
    }
    
    .card {
      transition: transform 0.3s, box-shadow 0.3s;
      background: linear-gradient(to bottom right, #ffffff, #f7fafc);
      border-radius: 1rem;
    }
    
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }
    
    .modal {
      transition: opacity 0.3s ease;
    }
    
    .tip-card {
      animation: fadeIn 0.5s ease-in-out;
      border-radius: 0.75rem;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .toggle-checkbox:checked {
      right: 0;
      border-color: #4ade80;
    }
    .toggle-checkbox:checked + .toggle-label {
      background-color: #4ade80;
    }
    
    /* Health-oriented aesthetic additions */
    body {
      background-color: #f0f9ff;
      color: #2c3e50;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #4ade80, #22c55e);
      border-radius: 0.75rem;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      background: linear-gradient(135deg, #22c55e, #16a34a);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
    }
    
    .btn-secondary {
      background: linear-gradient(135deg, #60a5fa, #3b82f6);
      border-radius: 0.75rem;
      transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
      background: linear-gradient(135deg, #3b82f6, #2563eb);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }
  </style>
</head>

<body class="bg-blue-50 min-h-screen font-sans">
  <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header -->
    <header class="py-6">
      <div class="flex justify-between items-center">
        <h1 class="text-3xl font-bold text-teal-800">HealthCare</h1>
        <div class="flex space-x-4">
          <button id="btn-custom-goals" class="btn-primary px-4 py-2 bg-gradient-to-br from-green-400 to-green-600 text-white rounded-lg hover:from-green-500 hover:to-green-700 transition-all flex items-center shadow-md">
            <i class="fas fa-star mr-2"></i> Metas Personalizadas
          </button>
          <button id="btn-goals" class="btn-secondary px-4 py-2 bg-gradient-to-br from-blue-400 to-blue-600 text-white rounded-lg hover:from-blue-500 hover:to-blue-700 transition-all flex items-center shadow-md">
            <i class="fas fa-bullseye mr-2"></i> Metas
          </button>
          <button id="btn-stats" class="px-4 py-2 bg-gradient-to-br from-purple-400 to-purple-600 text-white rounded-lg hover:from-purple-500 hover:to-purple-700 transition-all flex items-center shadow-md">
            <i class="fas fa-chart-line mr-2"></i> Estadísticas
          </button>
        </div>
      </div>

    </header>


    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 my-8">

      <div class="card bg-gradient-to-br from-white to-blue-50 rounded-xl shadow-md p-6 border-t-4 border-blue-400">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h2 class="text-xl font-semibold text-gray-800">Agua Consumida</h2>
            <p class="text-gray-600 text-sm">Objetivo diario: <span id="water-goal">2500</span> ml</p>
          </div>
          <div class="text-blue-500 text-3xl">
            <i class="fas fa-tint"></i>
          </div>
        </div>
        
        <div class="flex items-center justify-center my-4">
          <svg class="progress-ring" width="120" height="120">
            <circle class="progress-ring__circle bg" stroke="#e6e6e6" stroke-width="8" fill="transparent" r="50" cx="60" cy="60"/>
            <circle class="progress-ring__circle" id="water-progress" stroke="#3B82F6" stroke-width="8" fill="transparent" r="50" cx="60" cy="60" stroke-dasharray="314.16" stroke-dashoffset="157.08"/>
          </svg>
          <div class="absolute text-2xl font-bold text-gray-800"><span id="water-current">1250</span> ml</div>
        </div>
        
        <button id="add-water-btn" class="w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center">
          <i class="fas fa-plus mr-2"></i> Registrar consumo
        </button>
      </div>

      <!-- Exercise Card -->
      <div class="card bg-gradient-to-br from-white to-orange-50 rounded-xl shadow-md p-6 border-t-4 border-orange-400">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h2 class="text-xl font-semibold text-gray-800">Ejercicio</h2>
            <p class="text-gray-600 text-sm">Objetivo diario: <span id="exercise-goal">45</span> min</p>
          </div>
          <div class="text-orange-500 text-3xl">
            <i class="fas fa-running"></i>
          </div>
        </div>
        
        <div class="flex items-center justify-center my-4">
          <svg class="progress-ring" width="120" height="120">
            <circle class="progress-ring__circle bg" stroke="#e6e6e6" stroke-width="8" fill="transparent" r="50" cx="60" cy="60"/>
            <circle class="progress-ring__circle" id="exercise-progress" stroke="#F97316" stroke-width="8" fill="transparent" r="50" cx="60" cy="60" stroke-dasharray="314.16" stroke-dashoffset="220"/>
          </svg>
          <div class="absolute text-2xl font-bold text-gray-800"><span id="exercise-current">20</span> min</div>
        </div>
        
        <button id="add-exercise-btn" class="w-full py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center">
          <i class="fas fa-plus mr-2"></i> Registrar ejercicio
        </button>
      </div>

      <!-- Sleep Card -->
      <div class="card bg-gradient-to-br from-white to-indigo-50 rounded-xl shadow-md p-6 border-t-4 border-indigo-400">
        <div class="flex justify-between items-start mb-4">
          <div>
            <h2 class="text-xl font-semibold text-gray-800">Sueño</h2>
            <p class="text-gray-600 text-sm">Objetivo diario: <span id="sleep-goal">8</span> horas</p>
          </div>
          <div class="text-indigo-500 text-3xl">
            <i class="fas fa-moon"></i>
          </div>
        </div>
        
        <div class="flex items-center justify-center my-4">
          <svg class="progress-ring" width="120" height="120">
            <circle class="progress-ring__circle bg" stroke="#e6e6e6" stroke-width="8" fill="transparent" r="50" cx="60" cy="60"/>
            <circle class="progress-ring__circle" id="sleep-progress" stroke="#6366F1" stroke-width="8" fill="transparent" r="50" cx="60" cy="60" stroke-dasharray="314.16" stroke-dashoffset="120"/>
          </svg>
          <div class="absolute text-2xl font-bold text-gray-800"><span id="sleep-current">6</span> h</div>
        </div>
        
        <button id="add-sleep-btn" class="w-full py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors flex items-center justify-center">
          <i class="fas fa-plus mr-2"></i> Registrar sueño
        </button>
      </div>
    </div>

    <!-- Reminders Section -->
    <div class="bg-gradient-to-br from-white to-gray-50 rounded-xl shadow-md p-6 my-8">
      <div class="flex justify-between items-center mb-6">
        <h2 class="text-2xl font-bold text-gray-800">Recordatorios</h2>
        <button id="add-reminder-btn" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center">
          <i class="fas fa-plus mr-2"></i> Nuevo recordatorio
        </button>
      </div>
      
      <div class="space-y-4">
        <!-- Reminder 1 -->
        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
          <div class="flex items-center">
            <div class="bg-blue-100 rounded-full p-3 text-blue-500">
              <i class="fas fa-tint"></i>
            </div>
            <div class="ml-4">
              <h3 class="font-medium text-gray-800">Beber agua</h3>
              <p class="text-sm text-gray-600">Cada 2 horas (9:00 - 18:00)</p>
            </div>
          </div>
          <div class="flex items-center">
            <div class="relative inline-block w-12 mr-2 align-middle select-none">
              <input type="checkbox" name="toggle" id="toggle1" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer right-0"/>
              <label for="toggle1" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
            </div>
            <button class="text-gray-500 hover:text-red-500">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
        
        <!-- Reminder 2 -->
        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
          <div class="flex items-center">
            <div class="bg-orange-100 rounded-full p-3 text-orange-500">
              <i class="fas fa-running"></i>
            </div>
            <div class="ml-4">
              <h3 class="font-medium text-gray-800">Ejercicio</h3>
              <p class="text-sm text-gray-600">Lunes, Miércoles, Viernes - 18:30</p>
            </div>
          </div>
          <div class="flex items-center">
            <div class="relative inline-block w-12 mr-2 align-middle select-none">
              <input type="checkbox" name="toggle" id="toggle2" checked class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"/>
              <label for="toggle2" class="toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"></label>
            </div>
            <button class="text-gray-500 hover:text-red-500">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Tips Section -->
    <div class="bg-gradient-to-br from-white to-green-50 rounded-xl shadow-md p-6 my-8">
      <h2 class="text-2xl font-bold text-teal-800 mb-6">Sugerencias para hoy</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="tip-card p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border-l-4 border-blue-400 shadow-sm">
          <h3 class="font-medium text-blue-800 mb-2">Hidratación óptima</h3>
          <p class="text-blue-700">Beber agua entre comidas ayuda a mejorar la digestión y evita confundir la sed con el hambre.</p>
        </div>
        
        <div class="tip-card p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border-l-4 border-green-400 shadow-sm">
          <h3 class="font-medium text-green-800 mb-2">Mejora tu sueño</h3>
          <p class="text-green-700">Evitar pantallas 1 hora antes de dormir puede mejorar significativamente la calidad del sueño.</p>
        </div>
      </div>
    </div>

   
    <div id="water-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-blue-50 rounded-xl p-6 w-full max-w-md shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Registrar consumo de agua</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="mb-4">
          <label for="water-input" class="block text-sm font-medium text-gray-700 mb-1">Cantidad (ml)</label>
          <div class="flex">
            <input type="number" id="water-input" class="flex-grow px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="250">
            <button class="bg-gray-200 px-4 py-2 rounded-r-lg">ml</button>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3">
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cancelar
          </button>
          <button id="save-water" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
            Guardar
          </button>
        </div>
      </div>
    </div>

    <div id="exercise-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-orange-50 rounded-xl p-6 w-full max-w-md shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Registrar ejercicio</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="mb-4">
          <label for="exercise-input" class="block text-sm font-medium text-gray-700 mb-1">Duración (minutos)</label>
          <div class="flex">
            <input type="number" id="exercise-input" class="flex-grow px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="30">
            <button class="bg-gray-200 px-4 py-2 rounded-r-lg">min</button>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3">
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cancelar
          </button>
          <button id="save-exercise" class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors">
            Guardar
          </button>
        </div>
      </div>
    </div>

    <!-- Add Sleep Modal -->
    <div id="sleep-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-indigo-50 rounded-xl p-6 w-full max-w-md shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Registrar sueño</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="mb-4">
          <label for="sleep-input" class="block text-sm font-medium text-gray-700 mb-1">Duración (horas)</label>
          <div class="flex">
            <input type="number" id="sleep-input" class="flex-grow px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="8" step="0.5">
            <button class="bg-gray-200 px-4 py-2 rounded-r-lg">h</button>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3">
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cancelar
          </button>
          <button id="save-sleep" class="px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors">
            Guardar
          </button>
        </div>
      </div>
    </div>

    
    <div id="custom-goals-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-green-50 rounded-xl p-6 w-full max-w-md shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Metas Personalizadas</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="space-y-4">
          <div>
            <h4 class="text-md font-medium text-gray-800 mb-3">Crea una meta personalizada con cualquier nombre y unidad</h4>
            <div class="grid grid-cols-2 gap-3">
              <div>
                <label for="custom-goal-name" class="block text-sm font-medium text-gray-700 mb-1">Nombre</label>
                <input type="text" id="custom-goal-name" placeholder="Ej: Meditación" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
              </div>
              <div>
                <label for="custom-goal-value" class="block text-sm font-medium text-gray-700 mb-1">Valor</label>
                <input type="number" id="custom-goal-value" placeholder="20" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
              </div>
              <div class="col-span-2">
                <label for="custom-goal-unit" class="block text-sm font-medium text-gray-700 mb-1">Unidad</label>
                <input type="text" id="custom-goal-unit" placeholder="Ej: minutos" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500">
              </div>
            </div>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cancelar
          </button>
          <button id="save-custom-goals" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors">
            Guardar meta personalizada
          </button>
        </div>
      </div>
    </div>

    <!-- Goals Modal -->
    <div id="goals-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-blue-50 rounded-xl p-6 w-full max-w-md shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Establecer metas diarias básicas</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="space-y-4">
          <div>
            <label for="water-goal-input" class="block text-sm font-medium text-gray-700 mb-1">Agua (ml)</label>
            <input type="number" id="water-goal-input" value="2500" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
          </div>
          
          <div>
            <label for="exercise-goal-input" class="block text-sm font-medium text-gray-700 mb-1">Ejercicio (minutos)</label>
            <input type="number" id="exercise-goal-input" value="45" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
          </div>
          
          <div>
            <label for="sleep-goal-input" class="block text-sm font-medium text-gray-700 mb-1">Sueño (horas)</label>
            <input type="number" id="sleep-goal-input" value="8" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" step="0.5">
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cancelar
          </button>
          <button id="save-goals" class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
            Guardar metas
          </button>
        </div>
      </div>
    </div>

    <!-- Stats Modal -->
    <div id="stats-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-purple-50 rounded-xl p-6 w-full max-w-4xl shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Estadísticas</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="flex mb-4 space-x-4">
          <button class="stat-tab px-4 py-2 bg-purple-600 text-white rounded-lg">Semanal</button>
          <button class="stat-tab px-4 py-2 bg-gray-200 text-gray-700 rounded-lg">Mensual</button>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-center text-gray-800 mb-2">Consumo de agua</h4>
            <div class="h-64">
              <canvas id="waterChart"></canvas>
            </div>
          </div>
          
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-center text-gray-800 mb-2">Minutos de ejercicio</h4>
            <div class="h-64">
              <canvas id="exerciseChart"></canvas>
            </div>
          </div>
          
          <div class="bg-gray-50 p-4 rounded-lg">
            <h4 class="text-center text-gray-800 mb-2">Horas de sueño</h4>
            <div class="h-64">
              <canvas id="sleepChart"></canvas>
            </div>
          </div>
        </div>
        
        <div class="flex justify-between mt-6">
          <button id="btn-export" class="btn-primary px-4 py-2 bg-gradient-to-br from-green-400 to-green-600 text-white rounded-lg hover:from-green-500 hover:to-green-700 transition-all flex items-center shadow-md">
            <i class="fas fa-file-pdf mr-2"></i> Exportar PDF
          </button>
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cerrar
          </button>
        </div>
      </div>
    </div>

    <!-- Add Reminder Modal -->
    <div id="reminder-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gradient-to-br from-white to-teal-50 rounded-xl p-6 w-full max-w-md shadow-xl">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-gray-800">Nuevo recordatorio</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="space-y-4">
          <div>
            <label for="reminder-type" class="block text-sm font-medium text-gray-700 mb-1">Tipo de actividad</label>
            <select id="reminder-type" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
              <option value="water">Beber agua</option>
              <option value="exercise">Ejercicio</option>
              <option value="sleep">Descanso</option>
            </select>
          </div>
          
          <div>
            <label for="reminder-time" class="block text-sm font-medium text-gray-700 mb-1">Hora</label>
            <input type="time" id="reminder-time" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
          </div>
          
          <div>
            <label for="reminder-frequency" class="block text-sm font-medium text-gray-700 mb-1">Frecuencia</label>
            <select id="reminder-frequency" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
              <option value="daily">Diario</option>
              <option value="weekdays">Días laborables</option>
              <option value="custom">Personalizado</option>
            </select>
          </div>
          
          <div>
            <label for="reminder-message" class="block text-sm font-medium text-gray-700 mb-1">Mensaje personalizado</label>
            <textarea id="reminder-message" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500" rows="3" placeholder="Es hora de..."></textarea>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button class="close-modal px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
            Cancelar
          </button>
          <button id="save-reminder" class="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
            Guardar recordatorio
          </button>
        </div>
      </div>
    </div>
  </div>

  <script id="app-script">
    // Initialize circular progress bars
    function setProgress(element, current, goal) {
      const circle = document.getElementById(element);
      const radius = circle.r.baseVal.value;
      const circumference = radius * 2 * Math.PI;
      
      circle.style.strokeDasharray = `${circumference} ${circumference}`;
      
      const offset = circumference - (current / goal) * circumference;
      circle.style.strokeDashoffset = offset;
    }
    
    // Initialize charts
    function initCharts() {
      // Water chart
      const waterCtx = document.getElementById('waterChart').getContext('2d');
      const waterChart = new Chart(waterCtx, {
        type: 'bar',
        data: {
          labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
          datasets: [{
            label: 'Agua (ml)',
            data: [1800, 2200, 1950, 2500, 2300, 1250, 0],
            backgroundColor: '#3B82F6',
            borderColor: '#2563EB',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
      
      // Exercise chart
      const exerciseCtx = document.getElementById('exerciseChart').getContext('2d');
      const exerciseChart = new Chart(exerciseCtx, {
        type: 'bar',
        data: {
          labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
          datasets: [{
            label: 'Ejercicio (min)',
            data: [30, 0, 45, 0, 60, 20, 0],
            backgroundColor: '#F97316',
            borderColor: '#EA580C',
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
      
      // Sleep chart
      const sleepCtx = document.getElementById('sleepChart').getContext('2d');
      const sleepChart = new Chart(sleepCtx, {
        type: 'line',
        data: {
          labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
          datasets: [{
            label: 'Sueño (horas)',
            data: [7.5, 6, 8, 7, 6.5, 9, 6],
            backgroundColor: 'rgba(99, 102, 241, 0.2)',
            borderColor: '#6366F1',
            borderWidth: 2,
            tension: 0.3
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
    }
    
    // Event listeners for modal opening/closing
    document.addEventListener('DOMContentLoaded', function() {
      // Set initial progress
      setProgress('water-progress', 1250, 2500);
      setProgress('exercise-progress', 20, 45);
      setProgress('sleep-progress', 6, 8);
      
      // Modal handlers
      const openModal = (modalId) => {
        document.getElementById(modalId).classList.remove('hidden');
      };
      
      const closeModals = () => {
        document.querySelectorAll('.modal').forEach(modal => {
          modal.classList.add('hidden');
        });
      };
      
      // Open modals
      document.getElementById('add-water-btn').addEventListener('click', () => openModal('water-modal'));
      document.getElementById('add-exercise-btn').addEventListener('click', () => openModal('exercise-modal'));
      document.getElementById('add-sleep-btn').addEventListener('click', () => openModal('sleep-modal'));
      document.getElementById('btn-custom-goals').addEventListener('click', () => openModal('custom-goals-modal'));
      document.getElementById('btn-goals').addEventListener('click', () => openModal('goals-modal'));
      document.getElementById('btn-stats').addEventListener('click', () => {
        openModal('stats-modal');
        // Initialize charts when stats modal is opened
        setTimeout(initCharts, 100);
      });
      document.getElementById('add-reminder-btn').addEventListener('click', () => openModal('reminder-modal'));
      
      // Close modals
      document.querySelectorAll('.close-modal').forEach(button => {
        button.addEventListener('click', closeModals);
      });
      
      // Save data handlers
      document.getElementById('save-water').addEventListener('click', () => {
        const input = document.getElementById('water-input').value;
        if (input && !isNaN(input) && input > 0) {
          const currentWater = parseInt(document.getElementById('water-current').textContent);
          const newWater = currentWater + parseInt(input);
          document.getElementById('water-current').textContent = newWater;
          
          const waterGoal = parseInt(document.getElementById('water-goal').textContent);
          setProgress('water-progress', newWater, waterGoal);
          
          // Call the HealthCoach Loop API
          fetch('https://magicloops.dev/api/loop/ee6db2c2-3650-436b-9f15-ad3695a26799/run', {
            method: 'POST',
            body: JSON.stringify({
              water: newWater / 1000, // Convert to liters
              exercise: parseInt(document.getElementById('exercise-current').textContent),
              sleep: parseFloat(document.getElementById('sleep-current').textContent)
            })
          })
          .then(response => response.json())
          .catch(error => console.error('Error calling Health Coach:', error));
          
          closeModals();
        } else {
          alert('Por favor ingresa una cantidad válida.');
        }
      });
      
      document.getElementById('save-exercise').addEventListener('click', () => {
        const input = document.getElementById('exercise-input').value;
        if (input && !isNaN(input) && input > 0) {
          const currentExercise = parseInt(document.getElementById('exercise-current').textContent);
          const newExercise = currentExercise + parseInt(input);
          document.getElementById('exercise-current').textContent = newExercise;
          
          const exerciseGoal = parseInt(document.getElementById('exercise-goal').textContent);
          setProgress('exercise-progress', newExercise, exerciseGoal);
          
          closeModals();
        } else {
          alert('Por favor ingresa una cantidad válida.');
        }
      });
      
      document.getElementById('save-sleep').addEventListener('click', () => {
        const input = document.getElementById('sleep-input').value;
        if (input && !isNaN(input) && input > 0) {
          document.getElementById('sleep-current').textContent = input;
          
          const sleepGoal = parseInt(document.getElementById('sleep-goal').textContent);
          setProgress('sleep-progress', input, sleepGoal);
          
          closeModals();
        } else {
          alert('Por favor ingresa una cantidad válida.');
        }
      });
      
      document.getElementById('save-custom-goals').addEventListener('click', () => {
        // Get custom goal data
        const customGoalName = document.getElementById('custom-goal-name').value;
        const customGoalValue = document.getElementById('custom-goal-value').value;
        const customGoalUnit = document.getElementById('custom-goal-unit').value;
        
        // Store custom goal if all fields are filled
        if (customGoalName && customGoalValue && customGoalUnit) {
          const customGoal = {
            name: customGoalName,
            value: customGoalValue,
            unit: customGoalUnit
          };
          localStorage.setItem('customGoal', JSON.stringify(customGoal));
          
          // Optionally add UI update for custom goal here
          // This would create a new card or update existing UI elements
        }
        
        closeModals();
      });
      
      document.getElementById('save-goals').addEventListener('click', () => {
        const waterGoal = document.getElementById('water-goal-input').value;
        const exerciseGoal = document.getElementById('exercise-goal-input').value;
        const sleepGoal = document.getElementById('sleep-goal-input').value;
        
        if (waterGoal && exerciseGoal && sleepGoal) {
          document.getElementById('water-goal').textContent = waterGoal;
          document.getElementById('exercise-goal').textContent = exerciseGoal;
          document.getElementById('sleep-goal').textContent = sleepGoal;
          
          // Update progress bars with new goals
          setProgress('water-progress', parseInt(document.getElementById('water-current').textContent), waterGoal);
          setProgress('exercise-progress', parseInt(document.getElementById('exercise-current').textContent), exerciseGoal);
          setProgress('sleep-progress', parseInt(document.getElementById('sleep-current').textContent), sleepGoal);
          
          closeModals();
        } else {
          alert('Por favor completa todos los campos.');
        }
      });
      
      document.getElementById('save-reminder').addEventListener('click', () => {
        const type = document.getElementById('reminder-type').value;
        const time = document.getElementById('reminder-time').value;
        const frequency = document.getElementById('reminder-frequency').value;
        const message = document.getElementById('reminder-message').value;
        
        if (type && time && frequency) {
          // Call the ScheduleReminder Loop API
          const cronExpression = convertToCron(time, frequency);
          fetch('https://magicloops.dev/api/loop/4183d7d8-e1dc-433a-b082-4e202d150dfa/run', {
            method: 'POST',
            body: JSON.stringify({
              userId: "abc123", 
              reminderType: type,
              message: message || `Es hora de tu actividad de ${type}`,
              cronTime: cronExpression
            }),
          })
          .then(response => response.json())
          .then(data => {
            alert('Recordatorio guardado con éxito');
            closeModals();
          })
          .catch(error => {
            console.error('Error:', error);
            alert('Hubo un error al guardar el recordatorio');
          });
        } else {
          alert('Por favor completa los campos requeridos.');
        }
      });
      
      // Stats tab switcher
      document.querySelectorAll('.stat-tab').forEach(tab => {
        tab.addEventListener('click', (e) => {
          document.querySelectorAll('.stat-tab').forEach(t => {
            t.classList.remove('bg-purple-600', 'text-white');
            t.classList.add('bg-gray-200', 'text-gray-700');
          });
          
          e.target.classList.remove('bg-gray-200', 'text-gray-700');
          e.target.classList.add('bg-purple-600', 'text-white');
          
          // Add health coach integration to the save buttons
          document.getElementById('save-water').addEventListener('click', () => {
            const input = document.getElementById('water-input').value;
            if (input && !isNaN(input) && input > 0) {
              const currentWater = parseInt(document.getElementById('water-current').textContent);
              const newWater = currentWater + parseInt(input);
              document.getElementById('water-current').textContent = newWater;
              
              const waterGoal = parseInt(document.getElementById('water-goal').textContent);
              setProgress('water-progress', newWater, waterGoal);
              
              // Call the HealthCoach Loop API
              fetch('https://magicloops.dev/api/loop/ee6db2c2-3650-436b-9f15-ad3695a26799/run', {
                method: 'POST',
                body: JSON.stringify({
                  water: newWater / 1000, // Convert to liters
                  exercise: parseInt(document.getElementById('exercise-current').textContent),
                  sleep: parseFloat(document.getElementById('sleep-current').textContent)
                })
              })
              .then(response => response.json())
              .catch(error => console.error('Error calling Health Coach:', error));
              
              closeModals();
            } else {
              alert('Por favor ingresa una cantidad válida.');
            }
          });
          
          document.getElementById('save-exercise').addEventListener('click', () => {
            const input = document.getElementById('exercise-input').value;
            if (input && !isNaN(input) && input > 0) {
              const currentExercise = parseInt(document.getElementById('exercise-current').textContent);
              const newExercise = currentExercise + parseInt(input);
              document.getElementById('exercise-current').textContent = newExercise;
              
              const exerciseGoal = parseInt(document.getElementById('exercise-goal').textContent);
              setProgress('exercise-progress', newExercise, exerciseGoal);
              
              closeModals();
            } else {
              alert('Por favor ingresa una cantidad válida.');
            }
          });
          
          document.getElementById('save-sleep').addEventListener('click', () => {
            const input = document.getElementById('sleep-input').value;
            if (input && !isNaN(input) && input > 0) {
              document.getElementById('sleep-current').textContent = input;
              
              const sleepGoal = parseInt(document.getElementById('sleep-goal').textContent);
              setProgress('sleep-progress', input, sleepGoal);
              
              closeModals();
            } else {
              alert('Por favor ingresa una cantidad válida.');
            }
          });
          
          document.getElementById('save-goals').addEventListener('click', () => {
            const waterGoal = document.getElementById('water-goal-input').value;
            const exerciseGoal = document.getElementById('exercise-goal-input').value;
            const sleepGoal = document.getElementById('sleep-goal-input').value;
            
            if (waterGoal && exerciseGoal && sleepGoal) {
              document.getElementById('water-goal').textContent = waterGoal;
              document.getElementById('exercise-goal').textContent = exerciseGoal;
              document.getElementById('sleep-goal').textContent = sleepGoal;
              
              // Update progress bars with new goals
              setProgress('water-progress', parseInt(document.getElementById('water-current').textContent), waterGoal);
              setProgress('exercise-progress', parseInt(document.getElementById('exercise-current').textContent), exerciseGoal);
              setProgress('sleep-progress', parseInt(document.getElementById('sleep-current').textContent), sleepGoal);
              
              closeModals();
            } else {
              alert('Por favor completa todos los campos.');
            }
          });
          
          document.getElementById('save-reminder').addEventListener('click', () => {
            const type = document.getElementById('reminder-type').value;
            const time = document.getElementById('reminder-time').value;
            const frequency = document.getElementById('reminder-frequency').value;
            const message = document.getElementById('reminder-message').value;
            
            if (type && time && frequency) {
              // Call the ScheduleReminder Loop API
              const cronExpression = convertToCron(time, frequency);
              fetch('https://magicloops.dev/api/loop/4183d7d8-e1dc-433a-b082-4e202d150dfa/run', {
                method: 'POST',
                body: JSON.stringify({
                  userId: "abc123", 
                  reminderType: type,
                  message: message || `Es hora de tu actividad de ${type}`,
                  cronTime: cronExpression
                }),
              })
              .then(response => response.json())
              .then(data => {
                alert('Recordatorio guardado con éxito');
                closeModals();
              })
              .catch(error => {
                console.error('Error:', error);
                alert('Hubo un error al guardar el recordatorio');
              });
            } else {
              alert('Por favor completa los campos requeridos.');
            }
          });
        });
      });
      
      // Add function to convert UI time/frequency to cron expression
      function convertToCron(time, frequency) {
        const [hours, minutes] = time.split(':');
        
        switch(frequency) {
          case 'daily':
            return `${minutes} ${hours} * * *`;
          case 'weekdays':
            return `${minutes} ${hours} * * 1-5`;
          case 'custom':
            return `${minutes} ${hours} * * *`; // Default to daily
          default:
            return `${minutes} ${hours} * * *`;
        }
      }
      
      // Add PDF export functionality
      document.getElementById('btn-export').addEventListener('click', () => {
        const today = new Date();
        const thirtyDaysAgo = new Date(today);
        thirtyDaysAgo.setDate(today.getDate() - 30);
        
        const fromDate = thirtyDaysAgo.toISOString().split('T')[0];
        const toDate = today.toISOString().split('T')[0];
        
        // Get the chart data directly from the chart objects
        const waterChartData = Chart.getChart("waterChart").data.datasets[0].data;
        const exerciseChartData = Chart.getChart("exerciseChart").data.datasets[0].data;
        const sleepChartData = Chart.getChart("sleepChart").data.datasets[0].data;
        const labels = Chart.getChart("waterChart").data.labels;
        
        // Create records array from chart data
        const records = labels.map((day, index) => {
          return {
            date: new Date(today.getTime() - (6 - index) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
            water: waterChartData[index] / 1000, // Convert to liters
            exercise: exerciseChartData[index],
            sleep: sleepChartData[index]
          };
        });
        
        // Call the HealthReportPDF Loop API with only the statistics data
        fetch('https://magicloops.dev/api/loop/42cfdfca-d140-4526-869b-4def2847ce2f/run', {
          method: 'POST',
          body: JSON.stringify({
            userId: "abc123",
            from: fromDate,
            to: toDate,
            records: records,
            statsOnly: true // Add flag to indicate this is only statistics
          })
        })
        .then(response => response.json())
        .then(data => {
          alert('Informe estadístico PDF generado con éxito');
        })
        .catch(error => {
          console.error('Error:', error);
          alert('Hubo un error al generar el PDF de estadísticas');
        });
      });
      
      // Load additional goals from localStorage if they exist
      const savedCustomGoal = localStorage.getItem('customGoal');
      if (savedCustomGoal) {
        const customGoal = JSON.parse(savedCustomGoal);
        document.getElementById('custom-goal-name').value = customGoal.name;
        document.getElementById('custom-goal-value').value = customGoal.value;
        document.getElementById('custom-goal-unit').value = customGoal.unit;
      }
    });
  </script>
</body>
</html>